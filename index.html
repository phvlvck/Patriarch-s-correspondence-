<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ฎ๐ถ ุฏุฑุฏุดุฉ ุงูุนุฑุงู | Iraqi Chat</title>
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Language Selector -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <div class="current-language" onclick="toggleLanguageMenu()">
            <span class="fi fi-iq" id="currentFlag"></span>
            <span id="currentLang">ุงูุนุฑุจูุฉ</span>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div class="language-menu" id="languageMenu">
            <div class="language-option" onclick="changeLanguage('ar')">
                <span class="fi fi-iq"></span>
                <span>ุงูุนุฑุจูุฉ</span>
            </div>
            <div class="language-option" onclick="changeLanguage('en')">
                <span class="fi fi-us"></span>
                <span>English</span>
            </div>
            <div class="language-option" onclick="changeLanguage('ku')">
                <span class="fi fi-iq"></span>
                <span>Kurdรฎ</span>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="loading-content">
            <div class="logo-animation">
                <i class="fas fa-comments"></i>
                <span class="logo-text">ุฏุฑุฏุดุฉ ุงูุนุฑุงู</span>
            </div>
            <div class="loading-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <p class="loading-text" id="loadingText">ุฌุงุฑู ุงูุชุญููู...</p>
        </div>
    </div>

    <!-- App Container -->
    <div id="app" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="user-profile" onclick="toggleUserMenu()">
                    <img id="userAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Default" alt="Avatar" class="avatar">
                    <div class="user-info">
                        <h3 id="userName">ุฒุงุฆุฑ</h3>
                        <p id="userStatus" class="status online">ุฌุงุฑู ุงูุงุชุตุงู...</p>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="user-menu" id="userMenu">
                    <div class="menu-item" onclick="showPage('profile')">
                        <i class="fas fa-user"></i>
                        <span data-lang="profile">ุงูููู ุงูุดุฎุตู</span>
                    </div>
                    <div class="menu-item" onclick="showPage('settings')">
                        <i class="fas fa-cog"></i>
                        <span data-lang="settings">ุงูุฅุนุฏุงุฏุงุช</span>
                    </div>
                    <div class="menu-item" onclick="showPage('admin')" id="adminMenuItem" style="display: none;">
                        <i class="fas fa-shield-alt"></i>
                        <span data-lang="admin">ููุญุฉ ุงููุดุฑู</span>
                    </div>
                    <div class="menu-divider"></div>
                    <div class="menu-item logout" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span data-lang="logout">ุชุณุฌูู ุงูุฎุฑูุฌ</span>
                    </div>
                </div>
                <button class="new-chat-btn" onclick="showNewChatModal()">
                    <i class="fas fa-edit"></i>
                </button>
            </div>

            <!-- Search Box -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchContacts" placeholder="ุงุจุญุซ ุนู ูุญุงุฏุซุฉ..." oninput="searchChats()">
                </div>
            </div>

            <!-- Chat List -->
            <div class="chat-list" id="chatList">
                <!-- Chats will be loaded here -->
            </div>

            <!-- Bottom Navigation -->
            <div class="sidebar-footer">
                <button class="nav-btn active" onclick="showPage('chats')">
                    <i class="fas fa-comments"></i>
                    <span data-lang="chats">ุงููุญุงุฏุซุงุช</span>
                </button>
                <button class="nav-btn" onclick="showPage('contacts')">
                    <i class="fas fa-users"></i>
                    <span data-lang="contacts">ุฌูุงุช ุงูุงุชุตุงู</span>
                </button>
                <button class="nav-btn" onclick="showPage('discover')">
                    <i class="fas fa-compass"></i>
                    <span data-lang="discover">ุงูุชุดู</span>
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <div class="welcome-logo">
                        <i class="fas fa-comments"></i>
                        <h1 data-lang="welcome_title">ุฏุฑุฏุดุฉ ุงูุนุฑุงู</h1>
                    </div>
                    <p class="welcome-subtitle" data-lang="welcome_subtitle">
                        ููุตุฉ ุงูุชูุงุตู ุงูุนุฑุงููุฉ ุงูุฃููู ููุชุนุงุฑู ูุงูุตุฏุงูุงุช
                    </p>
                    
                    <div class="auth-buttons">
                        <button class="auth-btn primary" onclick="showAuthModal('register')">
                            <i class="fas fa-user-plus"></i>
                            <span data-lang="create_account">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</span>
                        </button>
                        <button class="auth-btn secondary" onclick="showAuthModal('login')">
                            <i class="fas fa-sign-in-alt"></i>
                            <span data-lang="login">ุชุณุฌูู ุงูุฏุฎูู</span>
                        </button>
                    </div>

                    <div class="features">
                        <div class="feature">
                            <i class="fas fa-shield-alt"></i>
                            <h3 data-lang="feature1_title">ุขูู ููุญูู</h3>
                            <p data-lang="feature1_desc">ุญูุงูุฉ ุจูุงูุงุชู ูู ุฃููููุชูุง</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-bolt"></i>
                            <h3 data-lang="feature2_title">ุณุฑูุน ููุจุงุดุฑ</h3>
                            <p data-lang="feature2_desc">ุฏุฑุฏุดุฉ ููุฑูุฉ ุจุฏูู ุชุฃุฎูุฑ</p>
                        </div>
                        <div class="feature">
                            <i class="fas fa-users"></i>
                            <h3 data-lang="feature3_title">ุชูุงุตู ุญูููู</h3>
                            <p data-lang="feature3_desc">ุชุนุฑู ุนูู ุฃุดุฎุงุต ุญูููููู</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Screen -->
            <div class="chat-screen" id="chatScreen" style="display: none;">
                <div class="chat-header">
                    <button class="back-btn" onclick="closeChat()">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <div class="chat-info">
                        <img id="chatAvatar" src="" alt="" class="avatar">
                        <div class="chat-details">
                            <h3 id="chatUserName"></h3>
                            <p id="chatUserStatus" class="status"></p>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="action-btn" onclick="toggleChatInfo()">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="action-btn" onclick="showChatMenu()">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be loaded here -->
                </div>

                <div class="chat-input">
                    <div class="input-actions">
                        <button class="input-btn" onclick="toggleEmojiPicker()">
                            <i class="far fa-smile"></i>
                        </button>
                        <button class="input-btn" onclick="attachFile()">
                            <i class="fas fa-paperclip"></i>
                        </button>
                    </div>
                    <div class="message-input">
                        <textarea 
                            id="messageInput" 
                            placeholder="ุงูุชุจ ุฑุณุงูุฉ..." 
                            rows="1"
                            oninput="autoResize(this)"
                            onkeypress="handleKeyPress(event)"
                        ></textarea>
                    </div>
                    <div class="send-actions">
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Other Pages -->
            <div class="page" id="profilePage" style="display: none;"></div>
            <div class="page" id="contactsPage" style="display: none;"></div>
            <div class="page" id="discoverPage" style="display: none;"></div>
            <div class="page" id="settingsPage" style="display: none;"></div>
            <div class="page" id="adminPage" style="display: none;"></div>
        </div>

        <!-- Chat Info Panel -->
        <div class="chat-info-panel" id="chatInfoPanel">
            <!-- Chat info will be loaded here -->
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ุชุณุฌูู ุงูุฏุฎูู</h2>
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" id="loginTab" onclick="switchAuthTab('login')">
                        <i class="fas fa-sign-in-alt"></i>
                        <span data-lang="login">ุชุณุฌูู ุงูุฏุฎูู</span>
                    </button>
                    <button class="auth-tab" id="registerTab" onclick="switchAuthTab('register')">
                        <i class="fas fa-user-plus"></i>
                        <span data-lang="register">ุฅูุดุงุก ุญุณุงุจ</span>
                    </button>
                </div>

                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail" data-lang="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword" data-lang="password">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="loginPassword" required>
                        <button type="button" class="show-password" onclick="togglePassword('loginPassword')">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="submit-btn" data-lang="login">ุชุณุฌูู ุงูุฏุฎูู</button>
                </form>

                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label for="registerName" data-lang="full_name">ุงูุงุณู ุงููุงูู</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerUsername" data-lang="username">ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail" data-lang="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword" data-lang="password">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="registerPassword" required minlength="6">
                        <button type="button" class="show-password" onclick="togglePassword('registerPassword')">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="registerConfirmPassword" data-lang="confirm_password">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="registerConfirmPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="registerAge" data-lang="age">ุงูุนูุฑ</label>
                        <input type="number" id="registerAge" min="13" max="100">
                    </div>
                    <div class="form-group">
                        <label for="registerCity" data-lang="city">ุงููุฏููุฉ</label>
                        <select id="registerCity">
                            <option value="">ุงุฎุชุฑ ุงููุฏููุฉ</option>
                            <option value="ุจุบุฏุงุฏ">ุจุบุฏุงุฏ</option>
                            <option value="ุงูุจุตุฑุฉ">ุงูุจุตุฑุฉ</option>
                            <option value="ุงูููุตู">ุงูููุตู</option>
                            <option value="ุฃุฑุจูู">ุฃุฑุจูู</option>
                            <option value="ุงูุณูููุงููุฉ">ุงูุณูููุงููุฉ</option>
                            <option value="ูุฑุจูุงุก">ูุฑุจูุงุก</option>
                            <option value="ุงููุฌู">ุงููุฌู</option>
                            <option value="ุจุงุจู">ุจุงุจู</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn" data-lang="create_account">ุฅูุดุงุก ุญุณุงุจ</button>
                </form>
            </div>
        </div>
    </div>

    <!-- New Chat Modal -->
    <div class="modal" id="newChatModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-lang="new_chat">ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ</h2>
                <button class="close-btn" onclick="closeNewChatModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchUsers" placeholder="ุงุจุญุซ ุนู ูุณุชุฎุฏู..." oninput="searchUsers()">
                </div>
                <div class="users-list" id="usersList">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div class="emoji-picker" id="emojiPicker">
        <!-- Emojis will be loaded here -->
    </div>

    <!-- Notification Center -->
    <div class="notification-center" id="notificationCenter"></div>

    <!-- WebSocket Status -->
    <div class="connection-status" id="connectionStatus">
        <i class="fas fa-wifi"></i>
        <span>ุฌุงุฑู ุงูุงุชุตุงู...</span>
    </div>

    <!-- Scripts -->
    <script src="languages.js"></script>
    <script src="script.js"></script>
    
    <!-- Emoji Picker Library -->
    <script src="https://cdn.jsdelivr.net/npm/@emoji-mart/data"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emoji-mart/web"></script>
    <script>
// ุญู ุณุฑูุน ููุดููุฉ ุงูุชุญููู
setTimeout(function() {
    const loading = document.getElementById('loadingScreen');
    const app = document.getElementById('app');
    const welcome = document.querySelector('.welcome-screen');
    
    if (loading) {
        loading.style.display = 'none';
        console.log('โ ุชู ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู');
    }
    
    if (app) {
        app.style.display = 'flex';
        console.log('โ ุชู ุฅุธูุงุฑ ุงูุชุทุจูู');
    }
    
    if (welcome) {
        welcome.style.display = 'flex';
        console.log('โ ุชู ุฅุธูุงุฑ ุดุงุดุฉ ุงูุชุฑุญูุจ');
    }
    
    // ุชุญููู ุงููุฏู ุงูุนุฑุงููุฉ
    const citySelect = document.getElementById('registerCity');
    if (citySelect) {
        const cities = ['ุจุบุฏุงุฏ', 'ุงูุจุตุฑุฉ', 'ุงูููุตู', 'ุฃุฑุจูู', 'ุงูุณูููุงููุฉ', 'ูุฑุจูุงุก', 'ุงููุฌู', 'ุจุงุจู'];
        cities.forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
        });
    }
    
    // ุฅุนุฏุงุฏ ุฃุฒุฑุงุฑ ุงููุตุงุฏูุฉ
    document.querySelectorAll('.auth-btn').forEach(btn => {
        btn.onclick = function() {
            const modal = document.getElementById('authModal');
            if (modal) modal.classList.add('show');
        };
    });
    
    // ุฒุฑ ุฅุบูุงู ุงููุงูุฐุฉ
    document.querySelectorAll('.close-btn').forEach(btn => {
        btn.onclick = function() {
            const modal = this.closest('.modal');
            if (modal) modal.classList.remove('show');
        };
    });
    
}, 1000); // ุงูุชุธุฑ ุซุงููุฉ ูุงุญุฏุฉ ููุท
    </script>
</body>
</html>
